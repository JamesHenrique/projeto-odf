═══════════════════════════════════════════════════════════════════════════════════
                    📊 EXEMPLO: PLANILHA base_insumos
═══════════════════════════════════════════════════════════════════════════════════

ANTES (Separador: hífen '-')
┌────────────────────────────────┬──────────────────────────────────────────────────┐
│ descricao                      │ variacoes                                        │
├────────────────────────────────┼──────────────────────────────────────────────────┤
│ GARCINIA CAMBOGIA              │ GARCINIA CAMBOGIA-GARCINIA EXTRACT-GARCINIA      │
│ VITAMINA D                     │ VITAMINA D-COLECALCIFEROL-VIT D                  │
│ OMEGA 3                        │ OMEGA 3-FISH OIL-OLEO DE PEIXE                   │
│ COLAGENO                       │ COLAGENO-COLAGENO HIDROLISADO                    │
└────────────────────────────────┴──────────────────────────────────────────────────┘

DEPOIS (Separador: ponto e vírgula ';')
┌────────────────────────────────┬──────────────────────────────────────────────────┐
│ descricao                      │ variacoes                                        │
├────────────────────────────────┼──────────────────────────────────────────────────┤
│ GARCINIA CAMBOGIA              │ GARCINIA CAMBOGIA;GARCINIA EXTRACT;GARCINIA      │
│ VITAMINA D                     │ VITAMINA D;COLECALCIFEROL;VIT D                  │
│ OMEGA 3                        │ OMEGA 3;FISH OIL;OLEO DE PEIXE                   │
│ COLAGENO                       │ COLAGENO;COLAGENO HIDROLISADO                    │
└────────────────────────────────┴──────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════════
                        🔄 COMO O SISTEMA PROCESSA
═══════════════════════════════════════════════════════════════════════════════════

Exemplo: GARCINIA CAMBOGIA

┌─────────────────────────────────────────────────────────────────────────────────┐
│ PASSO 1: Leitura da Planilha                                                    │
├─────────────────────────────────────────────────────────────────────────────────┤
│ descricao = "GARCINIA CAMBOGIA"                                                 │
│ variacoes = "GARCINIA CAMBOGIA;GARCINIA EXTRACT;GARCINIA"                      │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│ PASSO 2: Processamento                                                          │
├─────────────────────────────────────────────────────────────────────────────────┤
│ 1. Remove ';' do final (se existir)                                            │
│    "GARCINIA CAMBOGIA;GARCINIA EXTRACT;GARCINIA;" → limpo                       │
│                                                                                  │
│ 2. Divide por ';'                                                               │
│    variacoes_str.split(';')                                                     │
│                                                                                  │
│ 3. Resultado: Lista de variações                                               │
│    ['GARCINIA CAMBOGIA', 'GARCINIA EXTRACT', 'GARCINIA']                        │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│ PASSO 3: Criação do Mapa                                                        │
├─────────────────────────────────────────────────────────────────────────────────┤
│ mapa_variacoes = {                                                              │
│     'GARCINIA CAMBOGIA': [                                                      │
│         'GARCINIA CAMBOGIA',                                                    │
│         'GARCINIA EXTRACT',                                                     │
│         'GARCINIA'                                                              │
│     ]                                                                           │
│ }                                                                               │
│                                                                                  │
│ mapa_reverso = {                                                                │
│     'garcinia cambogia': {                                                      │
│         'medicamento_principal': 'GARCINIA CAMBOGIA',                           │
│         'todas_variacoes': ['GARCINIA CAMBOGIA', 'GARCINIA EXTRACT', ...]      │
│     },                                                                          │
│     'garcinia extract': {...},                                                  │
│     'garcinia': {...}                                                           │
│ }                                                                               │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│ PASSO 4: Uso Durante Processamento                                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│ Receita contém: "GARCINIA"                                                      │
│                                                                                  │
│ Sistema busca:                                                                   │
│   1. Busca exata em 'descricao' → NÃO encontrou                                │
│   2. Busca em 'variacoes' (mapa_reverso) → ENCONTROU!                          │
│                                                                                  │
│ Resultado processado:                                                            │
│   GARCINIA:[GARCINIA CAMBOGIA,GARCINIA EXTRACT,GARCINIA]                        │
│                                                                                  │
│ Sistema tentará automaticamente:                                                 │
│   1º → GARCINIA CAMBOGIA                                                        │
│   2º → GARCINIA EXTRACT (se 1º não funcionar)                                   │
│   3º → GARCINIA (se 2º não funcionar)                                           │
└─────────────────────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════════
                            📝 LOGS DO SISTEMA
═══════════════════════════════════════════════════════════════════════════════════

Quando o sistema carrega as variações, você verá:

[INFO] Conectado a aba base_insumos
[INFO] Total de insumos na base: 150
[INFO]   GARCINIA CAMBOGIA -> 3 variacoes: ['GARCINIA CAMBOGIA', 'GARCINIA EXTRACT', 'GARCINIA']
[INFO]   VITAMINA D -> 3 variacoes: ['VITAMINA D', 'COLECALCIFEROL', 'VIT D']
[INFO]   OMEGA 3 -> 3 variacoes: ['OMEGA 3', 'FISH OIL', 'OLEO DE PEIXE']
[INFO] Total de medicamentos na base: 150
[INFO] Medicamentos COM variacoes: 45
[INFO] Mapa reverso criado com 135 variacoes


Durante processamento de receita:

[INFO] Processando medicamentos da receita 123: GARCINIA, VITAMINA D
[INFO]   Buscando variacoes para: 'GARCINIA'
[INFO]     ENCONTRADO nas variacoes de: 'GARCINIA CAMBOGIA' -> 3 opcoes
[INFO]   Buscando variacoes para: 'VITAMINA D'
[INFO]     ENCONTRADO na descricao: 'VITAMINA D' -> 3 opcoes
[INFO] Resultado: GARCINIA:[GARCINIA CAMBOGIA,GARCINIA EXTRACT,GARCINIA], VITAMINA D:[VITAMINA D,COLECALCIFEROL,VIT D]


═══════════════════════════════════════════════════════════════════════════════════
                        🧪 EXEMPLO DE TESTE PRÁTICO
═══════════════════════════════════════════════════════════════════════════════════

1. Atualize uma linha na planilha base_insumos:

   ┌────────────────────────┬─────────────────────────────────────────┐
   │ descricao              │ variacoes                               │
   ├────────────────────────┼─────────────────────────────────────────┤
   │ TESTE MEDICAMENTO      │ TESTE MEDICAMENTO;TESTE MED;MED TESTE   │
   └────────────────────────┴─────────────────────────────────────────┘

2. Crie uma receita de teste com medicamento: "TESTE MED"

3. Execute o sistema e observe os logs:

   [INFO]   TESTE MEDICAMENTO -> 3 variacoes: ['TESTE MEDICAMENTO', 'TESTE MED', 'MED TESTE']
   [INFO]   Buscando variacoes para: 'TESTE MED'
   [INFO]     ENCONTRADO nas variacoes de: 'TESTE MEDICAMENTO' -> 3 opcoes
   
4. Sistema tentará automaticamente:
   - 1ª tentativa: TESTE MEDICAMENTO
   - 2ª tentativa: TESTE MED (deve funcionar!)
   - 3ª tentativa: MED TESTE (se necessário)


═══════════════════════════════════════════════════════════════════════════════════
                            ⚠️ CASOS ESPECIAIS
═══════════════════════════════════════════════════════════════════════════════════

1. MEDICAMENTO COM HÍFEN NO NOME:
   
   ❌ ANTES (Problemático):
   descricao: ALFA-LIPOICO
   variacoes: ALFA-LIPOICO-ACIDO ALFA LIPOICO
   → Sistema dividiu errado: ['ALFA', 'LIPOICO', 'ACIDO ALFA LIPOICO']
   
   ✅ DEPOIS (Correto):
   descricao: ALFA-LIPOICO
   variacoes: ALFA-LIPOICO;ACIDO ALFA LIPOICO
   → Sistema divide certo: ['ALFA-LIPOICO', 'ACIDO ALFA LIPOICO']


2. VARIAÇÕES COM ESPAÇOS:
   
   ✅ Funciona (espaços são removidos automaticamente):
   variacoes: GARCINIA ; EXTRACT ; VIT C
   → Resultado: ['GARCINIA', 'EXTRACT', 'VIT C']
   
   ✅ Preferido (sem espaços extras):
   variacoes: GARCINIA;EXTRACT;VIT C
   → Resultado: ['GARCINIA', 'EXTRACT', 'VIT C']


3. PONTO E VÍRGULA NO FINAL:
   
   ✅ Funciona (';' final é removido automaticamente):
   variacoes: GARCINIA;EXTRACT;
   → Resultado: ['GARCINIA', 'EXTRACT']
   
   ✅ Preferido (sem ';' no final):
   variacoes: GARCINIA;EXTRACT
   → Resultado: ['GARCINIA', 'EXTRACT']


═══════════════════════════════════════════════════════════════════════════════════
                        ✅ CHECKLIST DE VALIDAÇÃO
═══════════════════════════════════════════════════════════════════════════════════

Após atualizar a planilha, verifique:

[ ] Todos os '-' foram substituídos por ';' na coluna variacoes
[ ] Não há ';' duplos (;;)
[ ] Não há espaços excessivos ao redor do ';'
[ ] Nomes de medicamentos com hífen estão preservados
[ ] Removidos ';' extras no final das células
[ ] Testado com pelo menos 1 receita
[ ] Logs mostram variações carregadas corretamente
[ ] Sistema encontra medicamentos usando variações


═══════════════════════════════════════════════════════════════════════════════════